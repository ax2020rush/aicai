(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-481928ed"],{"0538":function(e,t,s){"use strict";var n=s("1c0b"),a=s("861d"),r=[].slice,o={},c=function(e,t,s){if(!(t in o)){for(var n=[],a=0;a<t;a++)n[a]="a["+a+"]";o[t]=Function("C,a","return new C("+n.join(",")+")")}return o[t](e,s)};e.exports=Function.bind||function(e){var t=n(this),s=r.call(arguments,1),o=function(){var n=s.concat(r.call(arguments));return this instanceof o?c(t,n.length,n):t.apply(e,n)};return a(t.prototype)&&(o.prototype=t.prototype),o}},"3b26":function(e,t,s){"use strict";var n=s("cadc"),a=s.n(n);a.a},4505:function(e,t,s){},"57d0":function(e,t,s){"use strict";var n=s("4505"),a=s.n(n);a.a},"7a95":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("h2",{class:"names"+e.num},[e._v(e._s(e.name))]),s("div",{staticClass:"tell",class:"tell"+e.num},["checkbox"!==e.type||e.code?"radio"!==e.type||e.code?e.code?e._e():s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],class:"in"+e.num,attrs:{code:e.code,placeholder:e.placeholder,type:e.type},domProps:{value:e.message},on:{focus:e.focus,click:e.focus,blur:e.blur,input:function(t){t.target.composing||(e.message=t.target.value)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],class:"in"+e.num,attrs:{code:e.code,placeholder:e.placeholder,type:"radio"},domProps:{checked:e._q(e.message,null)},on:{focus:e.focus,click:e.focus,blur:e.blur,change:function(t){e.message=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],class:"in"+e.num,attrs:{code:e.code,placeholder:e.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(e.message)?e._i(e.message,null)>-1:e.message},on:{focus:e.focus,click:e.focus,blur:e.blur,change:function(t){var s=e.message,n=t.target,a=!!n.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);n.checked?o<0&&(e.message=s.concat([r])):o>-1&&(e.message=s.slice(0,o).concat(s.slice(o+1)))}else e.message=a}}}),e.code?s("div",{staticClass:"codes"},["checkbox"===e.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"smsMobil",class:"in"+e.num,attrs:{code:e.code,placeholder:e.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(e.message)?e._i(e.message,null)>-1:e.message},on:{focus:e.focus,click:e.focus,blur:e.blur,change:function(t){var s=e.message,n=t.target,a=!!n.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);n.checked?o<0&&(e.message=s.concat([r])):o>-1&&(e.message=s.slice(0,o).concat(s.slice(o+1)))}else e.message=a}}}):"radio"===e.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"smsMobil",class:"in"+e.num,attrs:{code:e.code,placeholder:e.placeholder,type:"radio"},domProps:{checked:e._q(e.message,null)},on:{focus:e.focus,click:e.focus,blur:e.blur,change:function(t){e.message=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"smsMobil",class:"in"+e.num,attrs:{code:e.code,placeholder:e.placeholder,type:e.type},domProps:{value:e.message},on:{focus:e.focus,click:e.focus,blur:e.blur,input:function(t){t.target.composing||(e.message=t.target.value)}}}),e.code?s("a",{on:{click:e.getMsmCode}},[e._v(e._s(e.smsCode))]):e._e()]):e._e()])])},a=[],r=(s("b0c0"),s("e25e"),s("4795"),s("a474")),o={name:"inputBox",props:{placeholder:String,num:String,name:String,type:String,codephone:null,code:{type:Boolean,default:!1},usage:String},data:function(){return{message:null,smsCode:"获取验证码"}},methods:{focus:function(){var e=this;document.querySelector(".names"+this.num).classList.remove("active2"),document.querySelector(".names"+this.num).classList.add("active"),document.querySelector(".tell"+this.num).style.borderBottom="1px solid #333333",setTimeout((function(){document.querySelector(".in"+e.num).style.opacity="1"}),200)},blur:function(){this.message||(document.querySelector(".names"+this.num).classList.remove("active"),document.querySelector(".names"+this.num).classList.add("active2"),document.querySelector(".in"+this.num).style.opacity="0",document.querySelector(".tell"+this.num).style.borderBottom="1px solid #d3d3d3")},getMsmCode:function(){var e,t=this,s=this,n=60;e="forget"===this.$route.name||"register"===this.$route.name?document.querySelector(".in1").value:s.$refs.smsMobil._value,e&&11===e.length?parseInt(s.smsCode)>-1||r["a"].getSms({mobile:e,usage:s.usage}).then((function(e){if(200===e.code)var a=setInterval((function(){n--,s.smsCode=n+"s",n<0&&(s.smsCode="重新获取",clearInterval(a))}),1e3);else t.$toast.fail(e.data.message)})):s.$toast.fail("请输入正确的手机号码")}},computed:{},mounted:function(){}},c=o,i=(s("3b26"),s("2877")),u=Object(i["a"])(c,n,a,!1,null,"7dbb6686",null);t["a"]=u.exports},9536:function(e,t,s){e.exports={fontColor:"#EA4A32",fontColor2:"#222",blue:"#2196F3"}},b953:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",[e._m(0),s("inputBox",{ref:"user",attrs:{name:"请输入手机号",type:"number",num:"1"}}),s("inputBox",{ref:"code",attrs:{name:"请输入验证码",code:!0,usage:"register",type:"number",num:"2"}}),s("inputBox",{ref:"password",attrs:{name:"请输入密码",type:"password",num:"3"}}),s("inputBox",{ref:"yqm",attrs:{name:"请输入邀请码",type:"text",num:"4"}}),s("div",{staticClass:"btn"},[s("a",{on:{click:e.onsubmit}},[e._v("注册")])]),s("div",{staticClass:"chek"},[s("span",[e._v("已有账号?")]),s("span",{on:{click:function(t){return e.$router.push({path:"/login"})}}},[e._v("立即登录")])])],1)])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",[e._v("注册,"),s("br"),e._v("人人爱彩")])}],r=(s("96cf"),s("1da1")),o=s("7a95"),c=s("9536"),i=s.n(c),u=s("a474"),l=s("c43b"),m={name:"register",data:function(){return{checked:!1,scss:i.a}},methods:{onsubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s,n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.$refs.user.message||"",n=e.$refs.code.message||"",a=e.$refs.password.message||"",r=e.$refs.yqm.message||"",11===s.length){t.next=7;break}return e.$toast.fail("请输入正确的手机号"),t.abrupt("return");case 7:if(n){t.next=10;break}return e.$toast.fail("请输入验证码"),t.abrupt("return");case 10:if(a){t.next=13;break}return e.$toast.fail("请输入密码"),t.abrupt("return");case 13:return t.next=15,u["a"].resgiter({mobile:s,code:n,group:"app",drive:"1",promo_code:r,password:a,password_repetition:a});case 15:o=t.sent,200===o.code?(sessionStorage.clear(),localStorage.clear(),sessionStorage.setItem("userinfos",JSON.stringify(o.data)),sessionStorage.setItem("accessToken",o.data.member.access_token),sessionStorage.setItem("refresh_token",o.data.member.refresh_token),Object(l["a"])(),e.$router.push({path:"/"})):e.$toast.fail({message:o.message,position:"bottom"});case 17:case"end":return t.stop()}}),t)})))()}},mounted:function(){},components:{inputBox:o["a"]}},d=m,p=(s("57d0"),s("2877")),f=Object(p["a"])(d,n,a,!1,null,"ae16a524",null);t["default"]=f.exports},c0b6:function(e,t,s){var n=s("23e7"),a=s("0538");n({target:"Function",proto:!0},{bind:a})},c43b:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));s("d81d"),s("c0b6"),s("e25e"),s("4795"),s("96cf");var n=s("1da1"),a=s("a474"),r=s("4360"),o=s("fdb6"),c=!0,i=!0,u=!0,l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s,c,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].room();case 2:s=e.sent,200===s.code&&(c=s.data.map((function(e,t){return e.num=0,e})),r["a"].dispatch("getMessageNum",c)),l=new WebSocket("ws://ws.lemaifangzhi.com:8585/"),d=!0,l.onopen=function(){p&&clearInterval(p),p=setInterval((function(){l.send("ping")}),3e3)},l.onmessage=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s,n,c,m,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=JSON.parse(t.data),r["a"].dispatch("getMessage",s),u&&localStorage.setItem("time",Math.round(Object(o["b"])(8).getTime()/1e3)),"message"===s.type){for(n=r["a"].state.messageNum,c=0;c<n.length;c++)parseInt(n[c].id)===parseInt(s.room_id)&&(n[c].msg.content=s.content,n[c].msg.msg_type=String(s.msg_type),n[c].num++);r["a"].dispatch("getMessageNum",n)}if("cmd"!==s.type||!d){e.next=11;break}return d=!1,l.send(JSON.stringify({type:"init"})),e.next=9,a["a"].bind({client_id:s.client_id});case 9:m=e.sent,200===m.code&&(i=!0,p=a["a"].newMessage({disconnect_time:localStorage.getItem("time")}),200===p.code&&(u=!0));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.onerror=function(){u=!1,m()},l.onclose=function(){i&&(i=!1,u=!1,m())};case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){c&&setTimeout((function(){l(),c=!0}),3e3),c=!1}},cadc:function(e,t,s){}}]);